#include <WiFi.h>
#include <nvs.h>
#include <nvs_flash.h>

void resetWiFiSettings() {
  // Initialisiere NVS
  esp_err_t err = nvs_flash_init();
  if (err == ESP_ERR_NVS_NO_FREE_PAGES || err == ESP_ERR_NVS_NEW_VERSION_FOUND) {
    // Lösche NVS, falls kein Platz mehr vorhanden ist oder eine neue Version vorliegt
    nvs_flash_erase();
    nvs_flash_init();
  }
  
  // Lösche den WiFi-Stack-Speicher
  WiFi.disconnect(true, true);
  Serial.println("WLAN-Einstellungen wurden zurückgesetzt!");
}

void setup() {
  Serial.begin(115200);
  
  // WLAN zurücksetzen
  resetWiFiSettings();
  
  // Neustart nach dem Löschen
  Serial.println("ESP32 wird neu gestartet...");
  delay(2000);
  ESP.restart();
}

void loop() {
  // Loop kann leer bleiben
}
